<h1>New training</h1>

{% if exercises %}

    {% if training.time_start %}
        <!-- straining started - show start -->
        {{ training.time_start }}
    {% else %}
        <!-- training have not started yet - start button -->
        <form action="/start-training/{{training.id}}/" method="POST">{% csrf_token %}
            <input type="submit" value="Start"/>
        </form>
    {% endif %}
    <br />


    <form action="/stop-training/{{training.id}}/" method="POST">{% csrf_token %}
        
        {% if training.time_end %}
            <!-- training is over - show end time -->
            {{ training.time_end }}
        {% elif training.time_start %}
            <!-- training started - show stop button -->
            <input type="submit" value="Stop"/>
        {% else %}
            <!-- show nothing -->
        {% endif %}
    
        <br />

        <!-- show exercises -->
        {% for exercise in exercises %}
            <input type="text" name="name_{{exercise.id}}" value="{{exercise.name}}"/>
            <input type="text" name="weight_kg_{{exercise.id}}" value="{{exercise.weight_kg}}"/>
            <input type="text" name="weight_per_{{exercise.id}}" value="{{exercise.weight_per}}"/>

            {% for r in exercise.reps %}
                <input type="text" name="rep_{{r}}" value=""/>
            {% endfor %}
            
            <br />
        {% endfor %}

    </form>

{% endif %}<!-- exercises -->


{% if training.time_start %}
    <!-- show nothing -->
{% else %}
    <!-- show add exercise button -->
    <form action="/add-exercise/{{training.id}}/" method="POST">{% csrf_token %}
        <input type="text" name="name" value="Exercise"/>
        <input type="number" name="weight_kg" value="0" step="0.5"/>
        <select id="cars" name="weight_per">
            <option value="total">total</option>
            <option value="per_hand">per hand</option>
        </select>
        <input type="number" name="series" value="1" step="1" min="1" max="4">
        <input type="submit" value="Add"/>
    </form>
{% endif %}


<br />
<!-- training can be canceled at any point -->
<a href="/cancel-training/{{training.id}}">Cancel</a>


<!-- training can be saved only if it started and finished -->
{% if training.time_start and training.time_end %}
    <a href="/save-training/{{training.id}}">Save</a>
{% endif %}
